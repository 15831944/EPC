@{
    ViewBag.Title = "YearBusinessObjectiveQuery";
    Layout = "~/Views/Shared/_LayoutTab.cshtml";
}
<div class="mini-toolbar" style="padding: 2px; border-bottom: 0;">
    <table style="width: 100%;">
        <tr>
            <td style="width: 100%;">
                @Html.ExportButton()
            </td>
          
        </tr>
    </table>
</div>
<div class="mini-fit" style="height: 100px;" id="GridArea">
    <div id="dataGrid" url="YearBusinessList" class="mini-datagrid" style="width: 100%;
        height: 100%;" idfield="ID" multiselect="false" showpager="false">
        <div property="columns">
            <div field="IndicatorName" width="120" headeralign="center" align="center">
                指标名称</div>
            <div field="AnnualPlan" width="80" headeralign="center" align="right" datatype="currency">
                年度计划</div>
            <div field="MarketPlan" width="85" headeralign="center" align="right" datatype="currency">
                市场部下达年度计划</div>
            <div field="CompleteCount" width="80" headeralign="center" align="right" datatype="currency">
                实际完成</div>
            <div field="CompletionRate" width="85" headeralign="center" align="right">
                年度计划完成率</div>
            <div field="MarketCompletionRate" width="80" headeralign="center" align="right">
                市场计划完成率</div>
            <div field="LastYearCompleteCount" width="85" headeralign="center" align="right"
                datatype="currency">
                去年同期完成</div>
            <div field="LastYearRate" width="85" headeralign="center" align="right">
                较去年同期增长率</div>
        </div>
    </div>
</div>
<script>
    function cusTabSearch(tabData, normalSettings) {
        var belongYear = 0;
        for (var i = 0; i < tabData.length; i++) {
            var tabDataInfo = tabData[i];
            if (tabDataInfo.queryfield == "BelongYear") {
                belongYear = tabDataInfo.value;
                break;
            }
        }
        var dataGrid = mini.get("dataGrid");
        dataGrid.load({ Year: belongYear });
    }
</script>
