@{
    ViewBag.Title = "MonthBusinessObjectiveQueryByMonth";
    Layout = "~/Views/Shared/_LayoutTab.cshtml";
}
<div class="mini-toolbar" style="padding: 2px; border-bottom: 0;">
    <table style="width: 100%;">
        <tr>
            <td style="width: 100%;">
                @Html.ExportButton()
            </td>
        </tr>
    </table>
</div>
<div class="mini-fit" style="height: 100px;" id="GridArea">
    <div id="dataGrid" url="MonthBusinessByMonthList" class="mini-datagrid" style="width: 100%;
        height: 100%;" idfield="ID" multiselect="false" showpager="false" frozenstartcolumn="0"
        frozenendcolumn="1">
        <div property="columns">
            <div field="IndicatorName" width="120" headeralign="center" align="center">
                指标名称</div>
            <div field="CurrentMonth" width="60" headeralign="center" align="right">
                月份</div>
            <div field="AnnualPlan" width="100" headeralign="center" align="right" datatype="currency">
                年度计划</div>
            <div field="AnnualPlan" width="75" headeralign="center" align="right" datatype="currency">
                当月计划</div>
            <div field="CompleteCount" width="70" headeralign="center" align="right" datatype="currency">
                当月完成</div>
            <div field="LastYearCompleteCount" width="80" headeralign="center" align="right"
                datatype="currency">
                去年当月完成</div>
            <div field="LastYearRate" width="60" headeralign="center" align="right">
                较去年当月完成</div>
        </div>
    </div>
</div>
<script>
    function cusTabSearch(tabData, normalSettings) {
        var belongYear = 0;
        for (var i = 0; i < tabData.length; i++) {
            var tabDataInfo = tabData[i];
            if (tabDataInfo.queryfield == "BelongYear") {
                belongYear = tabDataInfo.value;
                break;
            }
        }
        var dataGrid = mini.get("dataGrid");
        dataGrid.load({ Year: belongYear });
    }
</script>
