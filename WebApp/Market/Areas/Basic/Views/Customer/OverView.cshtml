@{
    ViewBag.Title = "OverView";
}

<script src="/CommonWebResource/CoreLib/HighCharts/highcharts.js" type="text/javascript"></script>
<script src="/CommonWebResource/CoreLib/HighCharts/highcharts-3d.js" type="text/javascript"></script>
<table width="100%" cellspacing="0" cellpadding="0" style="margin-bottom: 5px;">
    <tr>
        <td width="50%" style="padding-right: 5px;">
            <div class="mini-panel" iconcls="icon-tip" title="概要信息" style="width: 100%;">
                <table width='100%' border='1' bordercolor="#999999" cellspacing='0' cellpadding='0' style="border-collapse: collapse;
                    border-style: solid;">
                    <tr>
                        <td class='descDiv'>
                            客户名称
                        </td>
                        <td class='valueDiv' colspan="3" style="width: 290px">
                            <font color='Brown'>@ViewBag.Customer.Name</font>
                        </td>
                    </tr>
                    <tr>
                        <td class='descDiv'>
                            客户编号
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.Customer.SerialNumber</font>
                        </td>
                        <td class='descDiv'>
                            客户简称
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.Customer.ShortName</font>
                        </td>
                    </tr>
                    <tr>
                        <td class='descDiv'>
                            主要联系人
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.Customer.LinkUser</font>
                        </td>
                        <td class='descDiv'>
                            联系人电话
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.Customer.LinkTelphone</font>
                        </td>
                    </tr>
                    <tr>
                        <td class='descDiv'>
                            客户联系地址
                        </td>
                        <td class='valueDiv' colspan="3" style="width: 290px">
                            <font color='Brown'>@ViewBag.Customer.Address</font>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
        <td width="25%" style="padding-right: 5px;">
            <div class="mini-panel" iconcls="icon-tip" title="相关合同信息" style="width: 100%;">
                <table width='100%' border='1' bordercolor="#999999" cellspacing='0' cellpadding='0' style="border-collapse: collapse;
                    border-style: solid;">
                    <tr>
                        <td class='descDiv'>
                            合同总数
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.ContractCount</font>
                        </td>
                    </tr>
                    <tr>
                        <td class='descDiv'>
                            在建合同数
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.ProcessContractCount</font>
                        </td>
                    </tr>
                    <tr>
                        <td class='descDiv'>
                            已关闭合同数
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.FinishContractCount</font>
                        </td>
                    </tr>
                    <tr>
                        <td class='descDiv'>
                            已中止合同数
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.TerminateContractCount</font>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
        <td width="25%">
            <div class="mini-panel" iconcls="icon-tip" title="相关项目信息" style="width: 100%; height: 100%">
                <table width='100%' border='1' bordercolor="#999999" cellspacing='0' cellpadding='0' style="border-collapse: collapse;
                    border-style: solid;">
                    <tr>
                        <td class='descDiv'>
                            项目数
                        </td>
                        <td class='valueDiv'>
                            <font color='Brown'>@ViewBag.ProjectCount</font>
                        </td>
                    </tr>
                    <tr>
                        <td class='descDiv'></td>
                        <td class='valueDiv'></td>
                    </tr>
                    <tr>
                        <td class='descDiv' style="height: 45px;"></td>
                        <td class='valueDiv'></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
</table>
<div class="mini-panel" iconcls="icon-tip" title="总体费用信息(单位：元)" style="width: 100%; padding: 0; margin-bottom: 5px;
    margin-top: 5px;" id="customerInfo" showheader="true">
    <table width='100%' border='1' bordercolor="#999999" cellspacing='0' cellpadding='0' style="border-collapse: collapse;
        border-style: solid;">
        <tr>
            <td class='descDiv'>
                合同总额
            </td>
            <td class='valueDiv'>
                <font color='Brown'>@ViewBag.ContractSummaryValue</font>
            </td>
            <td class='descDiv'>
                到款总额
            </td>
            <td class='valueDiv'>
                <font color='Brown'>@ViewBag.SummaryReceiptValue</font>
            </td>
            <td class='descDiv'>
                合同余额
            </td>
            <td class='valueDiv'>
                <font color='Brown'>@ViewBag.RemainContractValue</font>
            </td>
        </tr>
        <tr>
            <td class='descDiv'>
                应收款
            </td>
            <td class='valueDiv'>
                <font color='Brown'>@ViewBag.RevisibleValue </font>
            </td>
            <td class='descDiv'>
                坏账金额
            </td>
            <td class='valueDiv'>
                <font color='Brown'>@ViewBag.SummaryBadDebtValue</font>
            </td>
            <td class='descDiv'>
                
            </td>
            <td class='valueDiv'>
                <font color='Brown'></font>
            </td>
        </tr>
    </table>
</div>
<div class="mini-toolbar" style="padding: 0px; border-bottom: 0;">
    <table style="width: 100%;">
        <tr>
            <td style="width: 100%;">
                季度费用概况：
                <input name="LastYear" class="mini-combobox" style="width: 90px;" textfield="text" valuefield="value"
                       data="lastYearEnum" allowinput="false" onvaluechanged="SetChart();" value="2" />
            </td>
            <td style="white-space: nowrap;"></td>
        </tr>
    </table>
</div>
<div class="mini-fit" id="chartContainer">
</div>
<script type="text/javascript">
    var charOption=@Html.Raw(ViewBag.ChartOption);
    var lastYearEnum = [
        { text: "近2年", value: "2" },
        { text: "近3年", value: "3" },
        { text: "近4年", value: "4" },
        { text: "近5年", value: "5" }
    ];
</script>
<script type="text/javascript">
    var customerID = getQueryString("ID");
    function loadingChart(divID, option) {
        $("#" + divID).highcharts(option);

    }

    function pageLoad() {
        loadingChart("chartContainer", charOption);
    }

    function ViewList() {

    }

    function SetChart() {
        addExecuteParam("customerID", customerID);
        addExecuteParam("LastYear", mini.getbyName("LastYear").getValue());
        execute("GetChartInfo", { showLoading: true, refresh: false, onComplete: function (data) {
            loadingChart("chartContainer", data);
        }, validateForm: false
        });

    }
</script>
<style type="text/css">
    .descDiv {
        width: 85px;
        height: 20px;
        text-align: left;
        padding-left: 4px;
        background-color: #eeeeee;
        text-overflow: ellipsis;
    }

    body {
        font-size: 12px;
    }

    .valueDiv {
        width: 105px;
        line-height: 20px;
        text-align: left;
        padding-left: 10px;
        margin: 0px;
        table-layout: fixed;
        background-color: #ffffff;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    #expandPanel table td {
        text-align: center;
        width: 70px;
    }

        #expandPanel table td a {
            text-decoration: none;
        }
</style>